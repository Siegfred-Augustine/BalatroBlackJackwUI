@{
    ViewData["Title"] = "BBJ";
}
@model BlackJackBalatro.Services.GameState

<div class="text-center">
    <h1 class="display-4">Game</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
    <div id="game-area">
        <div id="play-area">
            <button id="start" onclick="gameStart()">Start Game</button>
            <div id="comp-area">
                @await Html.PartialAsync("Computerhand", @Model);
            </div>
        
            <div id="player-area">
                @await Html.PartialAsync("PlayerHand", @Model);
            </div>
            <button id="standButton" onclick="stand()">Stand</button>

        </div>
        
            <div id="inventory">
                @await Html.PartialAsync("Inventory", @Model);
            </div>
            <div id="stat-area">
                @await Html.PartialAsync("Stats", @Model);
            </div>
    </div>
</div>
<script>
    async function gameStart(){
        document.getElementById("start").disabled = true;
        for(let i = 0; i<2; i++){
            
            const chtml = await fetch(`/Deck/ComputerDraw`);
            const phtml = await fetch(`/Deck/PlayerNormalDraw`);

            document.getElementById("comp-area").innerHTML = await chtml.text();
            document.getElementById("player-area").innerHTML = await phtml.text();

            document.getElementById("standButton").disabled = false;
        }
    }
    async function stand(){

        document.getElementById("start").disabled = false;
        document.getElementById("standButton").disabled = true;
        document.getElementById("norm").disabled = true;
        document.getElementById("evil").disabled = true;
        document.getElementById("bonus").disabled = true;

        const html = await fetch(`/Deck/ComputerTurn`);
        document.getElementById("comp-area").innerHTML = await html.text();

        const phtml = await fetch(`/Deck/PlayerAreaRefresh`);
        document.getElementById("player-area").innerHTML = await phtml.text();

    }
</script>
